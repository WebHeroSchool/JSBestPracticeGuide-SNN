# Лучшие практики JavaScript

---

# 1. Избегайте глобальных переменных

Сведите к минимуму использование глобальных переменных.

Сюда входят все типы данных, объекты и функции.

Глобальные переменные и функции могут быть перезаписаны другими скриптами.

Вместо этого используйте локальные переменные и узнайте, как использовать замыкания .

# 2. Всегда объявлять локальные переменные

Все переменные, используемые в функции, должны быть объявлены как локальные переменные.

Локальные переменные должны быть объявлены с var ключевым словом или letключевым словом, иначе они станут глобальными переменными.

==Строгий режим не допускает необъявленных переменных.==

# 3. Объявления сверху

Хорошая практика программирования - помещать все объявления вверху каждого скрипта или функции.

Это будет:

+ Дайте более чистый код
+ Обеспечьте единое место для поиска локальных переменных
+ Упростите избежание нежелательных (подразумеваемых) глобальных переменных
+ Уменьшите вероятность нежелательных повторных деклараций

``` js
// Declare at the beginning
var firstName, lastName, price, discount, fullPrice;

// Use later
firstName = "John";
lastName = "Doe";

price = 19.90;
discount = 0.10;

fullPrice = price - discount;
```

Это также касается переменных цикла:

``` js
// Declare at the beginning
var i;

// Use later
for (i = 0; i < 5; i++) {
```

==По умолчанию JavaScript перемещает все объявления наверх ( JavaScript Hoisting ).==

# 4. Инициализировать переменные

Хорошая практика программирования - инициализировать переменные при их объявлении.

Это будет:

+ Дайте более чистый код
+ Обеспечьте единое место для инициализации переменных
+ Избегайте неопределенных значений

``` js
// Declare and initiate at the beginning
var firstName = "",
lastName = "",
price = 0,
discount = 0,
fullPrice = 0,
myArray = [],
myObject = {};
```

==Инициализация переменных дает представление о предполагаемом использовании (и предполагаемом типе данных).==

# 5. Никогда не объявляйте числовые, строковые или логические объекты

Всегда обрабатывайте числа, строки или логические значения как примитивные значения. Не как объекты.

Объявление этих типов как объектов снижает скорость выполнения и вызывает неприятные побочные эффекты:

### Пример

``` js
var x = "John";             
var y = new String("John");
(x === y) // is false because x is a string and y is an object.
``` 

Или еще хуже:

### Пример

``` js
var x = new String("John");             
var y = new String("John");
(x == y) // is false because you cannot compare objects.
```

# 6. Не использовать новый объект ()

+ Используйте '{}' вместо 'newObject()'
+ Используйте '""' вместо 'newString()'
+ Используйте '0' вместо 'newNumber()'
+ Используйте 'false' вместо 'newBoolean()'
+ Используйте '[]' вместо 'newArray()'
+ Используйте '/()/' вместо 'newRegExp()'
+ Используйте 'function (){}' вместо 'newFunction()'

# 7. Используйте === вместо ==

В JavaScript используются два вида операторов равенства: === | !== и == | != . Рекомендуется всегда использовать первый набор при сравнении (* предотвращает ошибки приведения типов. Здесь и далее примеч. пер.).

>>«Если двое операндов имеют один и тот же тип и значение, то в результате использования === получаем true, а в результате использования !== – false.» – «JavaScript: The Good Parts» (* JavaScript. Сильные стороны).

Однако при работе с == и != у вас могут возникнуть ошибки (* приведения типов), если значения имеют различный тип данных. В этих случаях они попробуют преобразовать тип значений, что часто приводит к ошибкам.

# 8. Eval = зло

Для тех, кто не в курсе, функция "eval" предоставляет нам доступ к компилятору JavaScript. Собственно, с ее помощью мы можем выполнить код, переданный ей в виде строки.

В результате ее использования не только значительно понизится производительность вашего скрипта, но и возникнет огромный риск, связанный с нарушением секретности (информационной безопасности), поскольку при вызове eval переданной строке предоставляются значительные полномочия (* например, могут читаться и меняться  локальные переменные). Избегайте ее использования!

# 9. Размещайте ваш скрипт в конце страницы

Этот совет уже упоминался в предыдущей статье этой серии. Но поскольку это очень уместно и тут, то я повторюсь.

``` 
    </div>
    <script type="text/javascript" src="path/to/file.js"></script>
    <script type="text/javascript" src="path/to/anotherFile.js"></script>
  </body>
</html>
``` 

Помните, что главная цель – сделать загрузку страницы максимально быстрой для пользователя. При загрузке скрипта браузер не может продолжить (* начать выполнение кода), пока не загружен весь файл. Поэтому пользователь должен будет ждать дольше, чтобы заметить какой-либо прогресс (* если скрипт размещается не в конце файла).

Если у вас имеются файлы JS, единственная цель которых – добавление какой-то функциональной возможности (например, после нажатия кнопки), то вперед, разместите эти файлы внизу, сразу перед закрывающим тегом body. Это безусловно относится к устоявшейся практике.

Более удачный вариант

``` js 
<p>And now you know my favorite kinds of corn. </p>
 <script type="text/javascript" src="path/to/file.js"></script>
 <script type="text/javascript" src="path/to/anotherFile.js"></script>
 </body>
 </html>
```

# 10. Комментируйте свой код

Поначалу может показаться, что в этом нет необходимости, но поверьте мне, вам следует комментировать ваш код насколько это возможно. Что произойдет, когда вы вернетесь к вашему проекту через несколько месяцев, – только то, что вы поймете: не так-то просто вспомнить ход собственной мысли. Или что если одному из ваших коллег необходимо будет внести изменения в ваш код? Всегда, всегда комментируйте важные части вашего кода.

``` js 
// Cycle through array and echo out each name. 
 for(var i = 0, len = array.length; i < len; i++) {
    console.log(array[i]);
 }
``` 

















